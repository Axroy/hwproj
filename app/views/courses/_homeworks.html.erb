<h2>Задачи</h2>

<% @assignments.reverse.each do |assignment| %>
  <strong>
    <% if assignment.homework? %>
      Домашняя работа
    <% elsif assignment.test? %>
      Тест
    <% end %>

  <%= assignment.number %>. </strong> <small><%= assignment.created_at.strftime("%d.%m.%y") %> </small>
  <% if signed_in? && current_user.teacher? %>
    <%= link_to edit_homework_path(assignment) do %>
      <span class="glyphicon glyphicon-pencil"></span>
    <% end %>
  <% end %> 

  <% assignment.links.order(:id).each do |link| %>
    <br>
    <%= link_to link.name, link.url %>
  <% end %>

  <ol>
    <% assignment.problems.order(:number).each do |problem| %>
      <li>
        <%= problem.text %>
        <% if signed_in? && current_user.student? && @student %>
          <%= link_to @student.tasks.select{|x| x.problem.id == problem.id}.first do %>
            <span class="glyphicon glyphicon-chevron-right"></span>
          <% end %>
        <% end %>
      </li>
    <% end %>
  </ol>
<% end %>